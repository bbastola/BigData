//we can update and insert records into mysql table from sqoop.

-- Steps for update only
1. we have a table called daily_revenue in hive
2. we also have a table is mysql called bbastola_daily_revenue

- First udpate the mysql table column(total_revenue) so that updated changes can be seen
update bbastola_daily_revenue set total_revenue = 0;
- Now we need to insert more data to current hive table
insert into table daily_revenue
  select order_date, sum(order_item_subtotal) daily_revenue
  from orders join order_items on
  order_id=order_item_order_id
  where order_date like'2013-08%'
  group by order_date;
-now we have to run the sqoop export

sqoop export \
--connect jdbc:mysql://ms.itversity.com/retail_export \
--username retail_user \
--password itversity \
--export-dir /apps/hive/warehouse/bbastola_sqoop_import.db/daily_revenue \
--table bbastola_daily_revenue \
--update-key order_date \
--input-fields-terminated-by "\001" \
--num-mappers 1

* After this has been successfully ran, query mysql bbastola_daily_revenue table and see updated total_revenue column.
* Also note even though hive table contains more data, it only updated and didn't insert those extra data

-Now to update and insert

set mysql total_revenue column to 0 again
-update bbastola_daily_revenue set total_revenue = 0;

run sqoop export again with --update-mode allowinsert

sqoop export \
--connect jdbc:mysql://ms.itversity.com/retail_export \
--username retail_user \
--password itversity \
--export-dir /apps/hive/warehouse/bbastola_sqoop_import.db/daily_revenue \
--table bbastola_daily_revenue \
--update-key order_date \
--update-mode allowinsert \
--input-fields-terminated-by "\001" \
--num-mappers 1


