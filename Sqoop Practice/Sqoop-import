Sqoop import:

* Importing customers table into HDFS from MySql using --query argument to import only 50 records.

sqoop import \
--options-file connection.props \
--target-dir=/user/bbastola/Dataset/sqoop_import \
--query 'select * from customers where (customer_id >= 1 AND customer_id <= 50) AND $CONDITIONS' -m 1 
(Note: $CONDITIONS argument is required while running free form query. Also NO need to mention --table argument)

* Incremental Import:
- used to import only rows newer or modified than previously imported set of rows
- Two types of incremental imports:
1. Append: Usefull while new rows are continually added with increasing row id values
2. Last modified: Usefull when source table rows are updated

1. Append: Here I'm appending records between 50 and 100. I'm using --where instead of --query. Both can be used

sqoop import \
--options-file connection.props \
--target-dir=/user/bbastola/Dataset/sqoop_import \
--table customers \
--append \
--where "customer_id >50 AND customer_id <= 100"
-m 1

--appending using incremental append
sqoop import \
--options-file connection.props \
--target-dir=/user/bbastola/Dataset/sqoop_import \
--table customers \
--check-column "customer_id" \
--incremental append \
--last-value 100 

2. Last modified - use if the source table rows are updated.
--incremental lastmodified \
--last-value 100 \
--append

* If the table you're trying to import doesn't have uniformly distributed primary key then you have to use following techniques to get accurate data

1. use split-by "column_name" (eg: --split-by "dept_id") 
2. use --boundary-query  
By default sqoop will use query select min(<split-by>), max(<split-by>) from <table name> to find out boundaries for creating splits. So you can specify any arbitrary query returning two numeric columns using --boundary-query argument.

for eg:
sqoop import \
--options-file connection.props \
--target-dir=/user/bbastola/Dataset/sqoop_import/custom_query \
--table customers \
--boundary-query "select min(customer_id), max(customer_id) from customers" \
--split-by customer_id \
-m 4

* while importing table you can filter columns.

sqoop import \
--options-file connection.props \
--table customers \
--columns "customer_id, customer_fname, customer_lname" \
--target-dir=/user/bbastola/Dataset/sqoop_import/custom_query \
--delete-target-dir
(This will only bring those two columns into hdfs from our retail_db database. --delete-targer-dir will delete the target directory if it exists)
